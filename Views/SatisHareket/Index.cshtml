@model List<MVCTicariOtomasyonWeb.Models.sınıflar.SatisHareket>

@{
    Layout = "~/Views/Shared/AdminLayout.cshtml";
    ViewData["Title"] = "Satış Listesi";
}

<div class="container-fluid px-4 mt-4">

    <div class="card shadow-sm border-0">
        
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0"><i class="bi bi-bar-chart"></i> Satış Hareketleri</h5>

            <a asp-controller="SatisHareket" asp-action="YeniSatis" class="btn btn-light btn-sm fw-semibold">
                <i class="bi bi-plus-circle"></i> Yeni Satış
            </a>
        </div>

        <div class="card-body">
            <table class="table table-hover text-center align-middle">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Ürün</th>
                        <th>Cari</th>
                        <th>Personel</th>
                        <th>Adet</th>
                        <th>Fiyat</th>
                        <th>Toplam</th>
                        <th>Tarih</th>
                        <th>İşlemler</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var s in Model)
                    {
                        <tr>
                            <td>@s.SatisId</td>

                            <td>
                                @(s.Urun != null ? s.Urun.UrunAd : "-")
                            </td>

                            <td>
                                @(s.Cariler != null 
                                    ? s.Cariler.CariAd + " " + s.Cariler.CariSoyad 
                                    : "—")
                            </td>

                            <td>
                                @(s.Personel != null 
                                    ? s.Personel.PersonelAd + " " + s.Personel.PersonelSoyad 
                                    : "Online Satış")
                            </td>

                            <td>@s.Adet</td>

                            <td>@s.Fiyat ₺</td>

                            <td>@s.ToplamTutar ₺</td>

                            <td>@s.Tarih.ToShortDateString()</td>

                            <td>
                                <a asp-controller="SatisHareket"
                                   asp-action="Detay"
                                   asp-route-id="@s.SatisId"
                                   class="btn btn-info btn-sm text-white me-1">
                                    <i class="bi bi-eye"></i>
                                </a>

                                <a asp-controller="SatisHareket"
                                   asp-action="Guncelle"
                                   asp-route-id="@s.SatisId"
                                   class="btn btn-warning btn-sm text-white me-1">
                                    <i class="bi bi-pencil"></i>
                                </a>

                                <form asp-controller="SatisHareket" 
                                      asp-action="Sil"
                                      asp-route-id="@s.SatisId" 
                                      method="post" 
                                      class="d-inline"
                                      onsubmit="return confirm('Silinsin mi?');">
                                    <button class="btn btn-danger btn-sm">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>

            </table>
        </div>

    </div>
</div>
